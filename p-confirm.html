<div id="confirmDiv" class="component" style="display:none">
  <div class="row lighten-3" id="">
    <div class="col s12 center-align" id="">End Turn</div>
  </div>
  <div class="row lighten-3" id="confirmListDiv"></div>
  
  <div class="row lighten-3" id="">
    <div class="col s12 center-align" id="confirmTimeDiv"></div>
  </div>
</div>

<script> 
  var _confirmDelayInterval;
  var _confirmCountdownInterval;
  var _confirmCountdownTime;
  
  function initConfirm() {
  }
  
  function showConfirm() {
    hideAll();
    showProgress();
    
    _confirmDelayInterval = setInterval(delayedShowConfirm, 2500); 
    updateConfirmHTML();
  }
  
  function delayedShowConfirm() {
    clearInterval(_confirmDelayInterval);
    hideAll();
    
    startConfirmCountdown();
    $('#confirmDiv').show();
  }
  
  function startConfirmCountdown() {
    _confirmCountdownTime = 10;
    _confirmCountdownInterval = setInterval(confirmCountdownUpdate, 1000); 
    
    updateConfirmTime();
  }
  
  function endConfirmCountdown() {
    clearInterval(_confirmCountdownInterval);
  }
  
  function confirmCountdownUpdate() {
    _confirmCountdownTime--;
    
    if(_confirmCountdownTime < 0 ){
      
      endConfirm();
      return;
    }
    
    updateConfirmTime();
  }
  
  function updateConfirmTime() {
    $('#confirmTimeDiv').html(_confirmCountdownTime);
  }
  
  function updateConfirmHTML() {
    var div = $('#confirmListDiv');
    div.empty();
    for( var i = 0; i <= _turnState.index; i++ ){
      var turnEntry = _turnState.data[i];
      div.append(confirmWordHTML(turnEntry.word,i,turnEntry.guessed));
    }
  }
  
  function confirmWordHTML(word,index,guessed) {
    var html = '';
    html += '<div class="col s12 left-align">';
    html += '  <label>';
    if(guessed)
      html += '    <input type="checkbox" class="filled-in" checked="checked" id="' + index +'" />';
    else
      html += '    <input type="checkbox" class="filled-in" id="' + index +'" />';
    html += '    <span>'+ word +'</span>';
    html += '  </label>';
    html += '</div>';
    return html;
  }
  
  function endConfirm() {
    endConfirmCountdown();
    //syncTurnDataWithGameData();
  }
  
  /********
  function showResults() {
    $('.a-turn-next').hide();
    $('.a-turn-end').hide();
    $("#timerDiv").hide();
    var result = "You earned your team " + _currentIndex + " points! "
    
    if( _appState.turnState.timeLeft > 0 && _currentRound < 2 ){
      var timeLeft = _appState.turnState.timeLeft;
      if( _currentIndex + 1 >= _entryIndexes.length ) {
        timeLeft = Math.min(timeLeft,_appState.rounds[_currentRound+1].roundLength);
      }
      result += "<br>You have " + timeLeft + " seconds left";
    }
     
    M.toast({html: result});
  }
  
    ******/
    
  function syncTurnDataWithGameData() {
    var entries = [];
    for( var i = 0; i < _turnState.data.length; i++ ){
      if( _turnState.data[i].guessed ){
        entries.push( _turnState.data[i].gameIndex );
      }
    }
    
    var teamName = _appState.teams[_appState.turnState.teamIndex].name;
    google.script.run
       .withSuccessHandler(endTurnCallback)
       .endTurn(entries, teamName, getCurrentRound(),_appState.turnState.timeLeft);
  }
  
  function endTurnCallback(){
    showHome();
  } 

  
</script>